# 4주차

날짜: 2022년 11월 27일

## 제 7 장 - 웹을 안전하게 하는 HTTPS

- HTTP의 약점
    - 평문이기 때문에 도청 가능
        - TCP/IP는 도청 가능한 프로토콜
        - 암호화로 도청을 피해야 한다
            - 통신 암호화
            SSL, TSL이라는 다른 프로토콜을 조합하여 HTTP의 통신 내용을 암호화할 수 있다.
            SSL을 조합한 HTTP를 HTTPS(HTTP Secure)나 HTTP over SSL이라 한다.
            - 콘텐츠 암호화
            통신하고 있는 콘텐츠의 내용 자체를 암호화하는 방법
            콘텐츠의 암호화를 유효하게 하기 위해서는 클라이언트와 서버가 콘텐츠의 암호화나 복호화 구조를 가지고 있는 것이 전제가 된다.
                
                <img src="images/콘텐츠%20암호화.png" width=50%>
                
    - 통신 상대를 확인하지 않기 때문에 위장 가능
        - HTTP를 사용한 리퀘스트나 리스폰스에서는 통신 상대를 확인하지 않는다.
        - SSL은 암호화뿐만 아니라 상대를 확인하는 수단으로 증명서를 제공한다.
    - 완전성을 증명할 수 없기 때문에 변조 가능
        - HTTP가 완전성을 증명할 수 없다.
            - 발신된 리퀘스트나 리스폰스와 수신한 리퀘스트나 리스폰스가 같은지 아닌지를 확인할 수 없다.
        - 중간자 공격 (Man-in-the-Middle)
            - 공격자가 도중에 리퀘스트나 리스폰스를 빼앗아 변조하는 공격
        - 변조를 방지하려면?
            - MD5나 SHA-1 등의 해시 값을 확인하는 방법과 파일의 디지털 서명을 확인하는 방법
            - 확실히 방지하려면 HTTPS를 사용할 필요
- HTTP + 암호화 + 인증 + 완전성 보호 = HTTPS
    - HTTP에 암호화와 인증과 완전성 보호를 더한 HTTPS
    - HTTPS는 SSL의 껍질을 덮어쓴 HTTP
        - HTTPS 새로운 애플리케이션 계층의 프로토콜은 아니다.
        HTTP 통신을 하는 소켓 부분을 SSL이나 TSL이라는 프로토콜로 대체하고 있을 뿐이다.
        
            <img src="images/HTTPS%20프로토콜.png" width=50%>
        
    - 상호간에 키를 교환하는 공개키 암호화 방식
        - SSL에서는 공개키 암호화 방식이라 불리는 암호화 방식을 채용한다.
        - 공통키 (대칭키)
            - 암호화와 복호화에 하나의 키를 같이 사용하는 방식
            - 키를 보내면 도청될 가능성이 있고, 키를 보내지 않으면 복호화할 수 없다.
            애초에 키를 안전하게 보낼 수 있다면 틀림없이 데이터도 안전하게 보낼 수 있다.
        - 공개키
            - 서로 다른 두 개의 키 페어(쌍)를 사용한다. (비밀키-private key, 공개키-public key)
            - 암호를 보내는 측이 상대의 공개키를 사용해 암호화를 한다.
            암호화된 정보를 받아들인 상대는 자신의 비밀키를 사용해 복호화를 한다.
        - HTTPS는 하이브리드 암호 시스템
            - HTTPS는 공통키 암호와 공개키 암호의 양쪽 성질을 가진 하이브리드 암호 시스템이다.
            - 공개키 암호는 공통키 암호에 비해서 처리 속도가 늦다.
            - 키를 교환하는 곳에서는 공개키 암호를 사용하고 
            그 후의 통신에서 메시지를 교환하는 곳에서는 공통키 암호를 사용한다.
    - 공개키가 정확한지 아닌지를 증명하는 증명서
        - 공개키가 진짜인지 아닌지를 증명할 수 없다는 문제점
        - 인증기관과 그 기관이 발행하는 공개키 증명서가 이용된다.
    - 안전한 통신을 하는 HTTPS의 구조
        
        <img src="images/HTTPS%20구조.png" width=50%>
        
        - SSL 통신이 지연되는 이유
            - 통신 속도가 떨어지는 것
            - CPU나 메모리 등의 리소스를 다량으로 소비함으로써 처리가 느려지는 것

## 제 8 장 - 누가 액세스하고 있는지를 확인하는 인증

- 인증이란
    - 서버에 액세스하고 있는 사람이 누군지 알기 위함
    - 등록된 본인만이 알고 있는 정보나 등록한 본인만이 가지고 있는 정보 등으로 확인할 필요가 있다.
        - 패스워드
        - 원타임 토큰
        - 전자 증명서
        - 바이오 매트릭스
        - IC 카드
    - HTTP에서 사용하는 인증 방법
        - BASIC 인증, DIGEST 인증, SSL 클라이언트 인증, 폼 베이스 인증
- BASIC 인증
    - 웹 서버와 대응하고 있는 클라이언트 사이에서 이뤄지는 인증 방식
    - Base64라는 인코딩 형식을 사용하고 있지만 이것은 암호화는 아니기 때문에
    아무런 부가 정보 없이도 복호화를 할 수 있다.
    - 한번 인증을 하면 일반 브라우저에서는 로그아웃 할 수 없다.
- DIGEST 인증
    - 챌린지 리스폰스 방식을 사용한다.
        - 최초에 상대방에게 인증 요구를 보내고 상대방 측에서 받은 챌린지 코드를 사용해서 리스폰스 코드를 계산한다.
        이 값을 상대에게 송신하여 인증을 하는 방법이다.
    - BASIC 보다는 높은 보안 등급을 제공하지만, HTTPS의 클라이언트 인증 등과 비교하면 낮다.
- SSL 클라이언트 인증
    - 2-Factor 인증에서 사용
    - 이용하는데 비용이 필요
- 폼 베이스 인증
    - 세션 관리와 쿠키에 의한 구현
- (추가) OAuth2 인증
    - 인증을 위한 개방형 표준 프로토콜
    - [https://blog.naver.com/mds_datasecurity/222182943542](https://blog.naver.com/mds_datasecurity/222182943542)

## 제 9 장 - HTTP에 기능을 추가한 프로토콜

- HTTP를 기본으로 하는 프로토콜
- HTTP의 병목 현상을 해소하는 SPDY
- 브라우저에서 양방향 통신을 하는 WebSocket
    - 단독 프로토콜로서 규격 책정
    - 웹 브라우저와 웹 서버를 위한 양방향 통신 규격
    - 웹 서버와 클라이언트가 한번 접속을 확립하면 그 뒤의 통신을 모두 전용 프로토콜로 하는 방식
- 등장이 기다려지는 HTTP/2.0
- 웹 서버 상의 파일을 관리하는 WebDAV

## 제 10 장 - 웹 콘텐츠에서 사용하는 기술

- HTML
    - 대부분 웹 페이지는 HTML로 되어 있다
    - HTML 버전
    - 디자인을 적용하는 CSS
- 다이나믹 HTML
    - 웹 페이지를 동적으로 변경하는 다이나믹 HTML
    - HTML을 조작하기 쉽게 해주는 DOM
- 웹 애플리케이션
    - 웹을 사용해서 기능을 제공하는 웹 애플리케이션
    - 웹 서버와 프로그램을 연계하는 CGI
        - CGI는 웹 서버가 클라이언트에서 받은 리퀘스트를 프로그램에 전달하기 위한 구조
        - CGI에 의해 프로그램은 리퀘스트 내용에 맞게 HTML을 생성하는 등으로 동적으로 콘텐츠를 생성할 수 있다.
    - Java에서 보급된 Servlet
        - 서버 상에 HTML 등의 동적 콘텐츠를 생성하기 위한 프로그램을 가리킨다.
        - CGI는 리퀘스트마다 프로그램을 기동하기 때문에 대량으로 액세스가 있을 때 웹 서버에 부하가 걸리지만
        서블릿에서는 웹 서버와 같은 프로세스 속에서 동작하기 때문에 비교적 부하가 적다.
- 데이터 송신에 이용되는 포맷이나 언어
    - 범용적으로 사용할 수 있는 마크업 언어 XML
        - SOAP 통신, 일반적으로 널리 알려진 HTTP, HTTPS, SMTP 등을 통해 XML 기반의 메시지를 컴퓨터 네트워크 상에서 교환하는 프로토콜
    - 갱신 정보를 송신하는 RSS/Atom
    - JavaScript에서 이용하기 쉽고 가벼운 JSON

## 제 11 장 - 웹 공격 기술

- 웹 공격 기술
    - HTTP에는 보안 기능이 없다
    - 리퀘스트는 클라이언트 측에서 변조 가능
    - 웹 애플리케잉션에 대한 공격 패턴
- 출력 값의 이스케이프 미비로 인한 취약성
    - 크로스 사이트 스크립팅
    - SQL 인젝션
    - OS 커맨드 인젝션
    - HTTP 헤더 인젝션
    - 메일 헤더 인젝션
    - 디렉토리 접근 공격
    - 리모트 파일 인클루션
- 웹 서버의 설정이나 설계 미비로 인한 취약성
    - 강제 브라우징
    - 부적절한 에러 메시지 처리
    - 오픈 리다이렉트
- 세션 관리 미비로 인한 취약성
    - 세션 하이잭
    - 세션 픽세이션
    - 크로스 사이트 리퀘스트 포저리
- 기타
    - 패스워드 크래킹
    - 클릭 재킹
    - DoS 공격
    - 백도어